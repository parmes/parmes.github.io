
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Parmec Input Commands &#8212; PARMES  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/parmes.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Output files" href="output_files.html" />
    <link rel="prev" title="Parmec Implementation Status" href="implementation_status.html" />
  
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
  <link rel="alternate" type="application/atom+xml"  href="../blog/atom.xml" title="PARMES/blog">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="parmec-input-commands">
<span id="id1"></span><h1>Parmec Input Commands<a class="headerlink" href="#parmec-input-commands" title="Permalink to this headline">¶</a></h1>
<p>PARMEC input language extends <a class="reference external" href="http://www.python.org/">Python</a>.
Subroutines related to input processing are listed below.
<strong>In all cases below, when an object number is returned,
indexing starts at 0 and increments on each call</strong>.</p>
<div class="section" id="argv">
<span id="parmec-command-argv"></span><h2>ARGV<a class="headerlink" href="#argv" title="Permalink to this headline">¶</a></h2>
<p>List command line arguments.</p>
<div class="topic">
<p class="topic-title first">list = ARGV (| nonparmec)</p>
<ul class="simple">
<li><strong>list</strong> - Python list (possibly empty) of command line arguments</li>
<li><strong>nonparmec</strong> - optional boolean flag enabling filtering out parmec arguments; default: True</li>
</ul>
</div>
</div>
<div class="section" id="reset">
<span id="parmec-command-reset"></span><h2>RESET<a class="headerlink" href="#reset" title="Permalink to this headline">¶</a></h2>
<p>Erase all data.</p>
<div class="topic">
<p class="topic-title first">RESET ()</p>
<p><em>(Can be used to run multiple simulations using one input file)</em></p>
</div>
</div>
<div class="section" id="tseries">
<span id="parmec-command-tseries"></span><h2>TSERIES<a class="headerlink" href="#tseries" title="Permalink to this headline">¶</a></h2>
<p>Create time series: a linear spline based on series of 2-points.</p>
<div class="topic">
<p class="topic-title first">tmsnum = TSERIES (points)</p>
<ul class="simple">
<li><strong>tmsnum</strong> - time series number</li>
<li><strong>points</strong> - a constant <em>v0</em>, or a list <em>[t0, v0, t1, v1, ….]</em> or
<em>[[t0,v0], [t1,v1], …]</em> or <em>[(t0,v0), (t1,v1), …]</em> of points
(where <em>ti &lt; tj</em>, when <em>i &lt; j</em>), or a path to a file storing pairs of
times and values in format:</li>
</ul>
<p>#&nbsp;comment&nbsp;1&nbsp;… <br />
#&nbsp;comment&nbsp;2&nbsp;… <br />
t0&nbsp;v0 <br />
t1&nbsp;v1 <br /></p>
<p>#&nbsp;comment&nbsp;3&nbsp;… <br />
t2&nbsp;v2 <br />
…</p>
</div>
</div>
<div class="section" id="material">
<span id="parmec-command-material"></span><h2>MATERIAL<a class="headerlink" href="#material" title="Permalink to this headline">¶</a></h2>
<p>Create material.</p>
<div class="topic">
<p class="topic-title first">matnum = MATERIAL (density, young, poisson)</p>
<ul class="simple">
<li><strong>matnum</strong> - material number</li>
<li><strong>density</strong> - mass density</li>
<li><strong>young</strong> - Young modulus</li>
<li><strong>poisson</strong> - Poisson ratio</li>
</ul>
</div>
</div>
<div class="section" id="sphere">
<h2>SPHERE<a class="headerlink" href="#sphere" title="Permalink to this headline">¶</a></h2>
<p>Create a spherical particle.</p>
<div class="topic">
<p class="topic-title first">parnum = SPHERE (center, radius, material, color)</p>
<ul class="simple">
<li><strong>parnum</strong> - particle number</li>
<li><strong>center</strong> - tuple <span class="math">\(\left(x,y,z\right)\)</span> defining the center</li>
<li><strong>radius</strong> - radius</li>
<li><strong>material</strong> - material number</li>
<li><strong>color</strong> - positive integer surface color</li>
</ul>
</div>
</div>
<div class="section" id="mesh">
<span id="parmec-command-mesh"></span><h2>MESH<a class="headerlink" href="#mesh" title="Permalink to this headline">¶</a></h2>
<p>Create a meshed particle.</p>
<div class="topic">
<p class="topic-title first">parnum = MESH (nodes, elements, material, colors)</p>
<ul class="simple">
<li><strong>parnum</strong> - particle number</li>
<li><strong>nodes</strong> - list of nodes: [<em>x0, y0, z0, x1, y1, z1, …</em>]</li>
<li><strong>elements</strong> - list of elements: [<em>e1, n1, n2, …, ne1, me1, e2,
n1, n2, …, ne2, me2, …</em>], where <em>e1</em> is the number of nodes of
the first element, <em>n1, n2, …, ne1</em> enumerate the element nodes,
and <em>me1</em> is the material number. Similarly for the second and all
remaining elements. Supported numbers of nodes per element are <em>4, 5,
6, and 8</em> for respectively <em>tetrahedron, pyramid, wedge, and
hexahedron</em>, cf. <a class="reference internal" href="#parmec-mesh-elements"><span class="std std-numref">Fig. 80</span></a></li>
<li><strong>material</strong> - material number</li>
<li><strong>colors</strong> - list of positive integer face colors: [<em>gcolor, f1,
n1, n2, …, nf1, c1, f2, n1, n2, …, nf2, c2, …</em>], where
<em>gcolor</em> is the global color for all not specified faces, <em>f1</em> is the
number of nodes in the first specified face, <em>n1, n2, …, nf1</em>
enumerate the face nodes, and <em>c1</em> is the surface color of that face.
Similarly for the second and all remaining faces. If only the global
color is required, it can be passed as [<em>gcolor</em>] or as <em>gcolor</em>
alone.</li>
</ul>
</div>
<div class="figure align-center" id="id2">
<span id="parmec-mesh-elements"></span><a class="reference internal image-reference" href="../_images/elements.png"><img alt="../_images/elements.png" src="../_images/elements.png" style="width: 60%;" /></a>
<p class="caption"><span class="caption-number">Fig. 80 </span><span class="caption-text">Mesh element types in Parmec.</span></p>
</div>
</div>
<div class="section" id="analytical">
<h2>ANALYTICAL<a class="headerlink" href="#analytical" title="Permalink to this headline">¶</a></h2>
<p>Create an analytical particle. Analytical particles have no shapes and
are not involved in contact.</p>
<div class="topic">
<p class="topic-title first">parnum = ANALYTICAL ( | inertia, mass, rotation, position, material, particle)</p>
<p>Note, that all parameters are optional.</p>
<ul class="simple">
<li><strong>parnum</strong> - particle number</li>
<li><strong>inertia</strong> - inertia tensor passed as a list [<em>Ixx, Iyy, Izz, Ixy,
Ixz, Iyz</em>]; optional, if <strong>particle</strong> parameter is used; default
[<em>1, 1, 1, 0, 0, 0</em>]</li>
<li><strong>mass</strong> - scalar mass; optional, if <strong>particle</strong> parameter is used;
default 1</li>
<li><strong>rotation</strong> - optional orientation matrix passed as a list [<em>e1x,
e1y, e1z, e2x, e2y, e2z, e3x, e3y, e3z</em>], where vectors <em>e1</em>, <em>e2</em>,
<em>e3</em> are orthonormal; default [<em>1, 0, 0, 0, 1, 0, 0, 0, 1</em>]</li>
<li><strong>position</strong> - optional position vector passed as a tuple (<em>x, y,
z</em>); default (<em>0, 0, 0</em>)</li>
<li><strong>material</strong> - material number; default <em>0</em></li>
<li><strong>particle</strong> - optional; if specified, an existing particle is
converted into an analytical particle; its properties are inherited
or overwritten, depending on whether any of the <strong>inertia</strong>,
<strong>mass</strong>, <strong>rotation</strong>, <strong>position</strong> parameters are used; if
initially specified, particle shape is inherited and its animated
motion is included into the results</li>
</ul>
</div>
</div>
<div class="section" id="obstacle">
<h2>OBSTACLE<a class="headerlink" href="#obstacle" title="Permalink to this headline">¶</a></h2>
<p>Create an obstacle.</p>
<div class="topic">
<p class="topic-title first">OBSTACLE (triangles, color | point, linear, angular)</p>
<ul class="simple">
<li><strong>triangles</strong> - list of triangle tuples [(<em>t1x1, t1y1, t1z1, t1x2,
t1y2, t1z2, t1x3, t1y3, t1z3), (t2x1, t2y1, t2z1, t2x2, t2y2, t2z2,
t2x3, t2y3, t2z3), …</em>] defining the obstacle</li>
<li><strong>color</strong> - positive integer surface color or a list [<em>color1,
color2, …</em>] of colors for each individual triangle</li>
<li><strong>point</strong> - spatial reference point</li>
<li><strong>linear</strong> - linear velocity history callback:
<span class="math">\(\left(v_{x},v_{y},v_{z}\right)=\)</span> <strong>linear</strong>
<span class="math">\(\left(t\right)\)</span></li>
<li><strong>angular</strong> - spatial angular velocity history callback:
<span class="math">\(\left(\omega_{x},\omega_{y},\omega_{z}\right)=\)</span> <strong>angular</strong>
<span class="math">\(\left(t\right)\)</span></li>
</ul>
</div>
</div>
<div class="section" id="spring">
<span id="parmec-command-spring"></span><h2>SPRING<a class="headerlink" href="#spring" title="Permalink to this headline">¶</a></h2>
<p>Create a translational spring constraint. The applied force formula
reads</p>
<div class="math">
\[\text{force}\left(t\right)=\text{direction}\left(t\right)\cdot\left[\text{spring}
\left(\text{stroke}\left(t\right)\right)+\text{dashpot}\left(\text{velocity}\left(t\right)\right)
\cdot\left|\text{sign}\left(\text{spring}\left(\text{stroke}\left(t\right)\right)\right)\right|\right]\]</div>
<p>where</p>
<div class="math">
\[\begin{split}\text{direction}\left(t\right)=\left\{ \begin{array}{c}
\text{d1}\left(t\right)=\left(\text{point2}\left(t\right)-\text{point1}\left(t\right)\right)/\left|
\text{point2}\left(t\right)-\text{point1}\left(t\right)\right|\mathbf{\,if\,}\text{geom2}=\text{point2}\\
\text{normal2}\left(t\right)\mathbf{\,if\,}\text{ geom2 =[point2, normal2]}\\
\text{constant }\mathbf{direction}=\left(d_{x},d_{y},d_{z}\right)\\
\text{d1}\left(t\right)-\text{d1}\left(t\right)\cdot\left(d_{x},d_{y},d_{z}\right)\text{if }\mathbf{planar}\text{ is enabled}
\end{array}\right.\end{split}\]</div>
<div class="math">
\[\text{stroke0}=\text{direction}\left(0\right)\cdot\left[\text{point2}\left(0\right)-\text{point1}\left(0\right)\right]\]</div>
<div class="math">
\[\begin{split}\text{stroke}\left(t\right)=\left\{ \begin{array}{c}
\text{direction}\left(t\right)\cdot\left[\text{point2}\left(t\right)-\text{point1}\left(t\right)\right]-
\text{stroke0}\mathbf{\,\,\,if\,}\text{geom2}=\text{point2}\\
\text{normal2}\left(t\right)\cdot\left[\text{point1}\left(t\right)-
\text{point2}\left(t\right)\right]\mathbf{\,\,\,if\,}\text{ geom2 =[point2, normal2]}
\end{array}\right.\end{split}\]</div>
<div class="math">
\[\text{velocity}\left(t\right)=\text{direction}\left(t\right)\cdot\frac{d}{dt}
\left[\text{point2}\left(t\right)-\text{point1}\left(t\right)\right]\]</div>
<div class="math">
\[\begin{split}\text{sign}\left(x\right)=\left\{ \begin{array}{c}
-1\text{ if }x&lt;0\\
0\text{ if }x=0\\
1\text{ if }x&gt;0
\end{array}\right.\end{split}\]</div>
<p>The <span class="math">\(\text{spring}\left(\text{stroke}\right)\)</span> and <span class="math">\(\text{dashpot}\left(\text{velocity}\right)\)</span> relationships are
defined by means of lookup tables; <span class="math">\(\text{force}\left(t\right)\)</span> is applied at <span class="math">\(\text{point2}\left(t\right)\)</span>, and
<span class="math">\(-\text{force}\left(t\right)\)</span> is applied at <span class="math">\(\text{point1}\left(t\right)\)</span>; dashpot force is not applied when
spring force is zero.</p>
<div class="topic">
<p class="topic-title first">sprnum = SPRING (part1, point1, part2, geom2, spring | dashpot, direction, planar, unload, ylim, inactive, offset, friction, kskn) <span class="red">(experimental)</span></p>
<ul class="simple">
<li><strong>sprnum</strong> - spring number</li>
<li><strong>part1</strong> - first particle number</li>
<li><strong>point1</strong> - tuple <span class="math">\(\left(x,y,z\right)\)</span> defining a point moving
with the first particle</li>
<li><strong>part2</strong> - second particle number; <span class="math">\(-1\)</span> can be used to
indicate a single-particle constraint</li>
<li><strong>geom2</strong> - tuple <span class="math">\(\left(x,y,z\right)\)</span> defining a second point, either moving with the second particle, or a spatial point;
alternatively a list storing a point and a normal [<span class="math">\(\left(p_{x},p_{y},p_{z}\right)\)</span>, <span class="math">\(\left(n_{x},n_{y},n_{z}\right)\)</span>]
defining a referential plane, moving with the second particle or spatially fixed; when a plane is defined the spring direction and
stroke are calculated from a projection of <strong>point1</strong> onto this plane: in this case the input arguments <strong>direction</strong> and <strong>planar</strong>
are ignored</li>
<li><strong>spring</strong> - spring force lookup table
<span class="math">\(\left[\text{stroke}_{1},\text{force}_{1},\text{stroke}_{2},\text{force}_{2},...,\text{stroke}_{n},\text{force}_{n}\right]\)</span>;
used for both loading and unloading when the <strong>unload</strong> table and the <strong>yield</strong> limits are not given</li>
<li><strong>dashpot</strong> - optional dashpot force lookup table
<span class="math">\(\left[\text{velocity}_{1},\text{force}_{1},\text{velocity}_{2},\text{force}_{2},...,\text{velocity}_{m},\text{force}_{m}\right]\)</span>
or a critical damping ratio from interval <span class="math">\(\left[0,+\infty\right)\)</span>; default: <span class="math">\(\left[-\infty,0,+\infty,0\right]\)</span></li>
<li><strong>direction</strong> - optional constant direction
<span class="math">\(\left(d_{x},d_{y},d_{z}\right)\)</span></li>
<li><strong>planar</strong> - optional planar spring flag; when ’ON’ spring direction
<span class="math">\(\left(\text{point2}\left(t\right)-\text{point1}\left(t\right)\right)/\left|\text{point2}\left(t\right)-\text{point1}\left(t\right)\right|\)</span>
is projected onto a plane orthogonal to <span class="math">\(\left(d_{x},d_{y},d_{z}\right)\)</span>; default: ’OFF’</li>
<li><strong>unload</strong> - optional spring unloading lookup table
<span class="math">\(\left[\text{stroke}_{1},\text{force}_{1},\text{stroke}_{2},\text{force}_{2},...,\text{stroke}_{n},\text{force}_{n}\right]\)</span>;
must be monotonically increasing; default: unspecified</li>
<li><strong>ylim</strong> - optional tuple <span class="math">\(\left(f_{yc},f_{yt}\right)\)</span> defining the compression, <span class="math">\(f_{yc}&lt;0\)</span>, and tension, <span class="math">\(f_{yt}&gt;0\)</span>, yield
limits; the unloading curve begins to be used once either of these limits is crossed; default: (0, 0)</li>
<li><strong>inactive</strong> - optional boolean flag: if <em>True</em> create an inactive spring, that can be activated by the <a class="reference internal" href="#parmec-command-unspring"><span class="std std-ref">UNSPRING</span></a>
command; default: <em>False</em></li>
<li><strong>offset</strong> - optional <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> number representing a time dependent adjustment applied to all stroke values
of the spring curve (dashpot unchanged) as in <a class="reference internal" href="#parmec-spring-stroke-offset"><span class="std std-numref">Fig. 81</span></a>; <strong>offset</strong> is applied only prior to yielding for springs
with <strong>ylim</strong> and <strong>unload</strong> specified; default: unspecified</li>
<li><strong>friction</strong> - optional tangential friction coefficient; default: 0.0</li>
<li><strong>kskn</strong> - optional <span class="math">\(\ge0\)</span> ratio of normal to tangential spring and dashpot parameters used when <strong>friction</strong> &gt; 0; using <strong>kskn</strong> = 0
disables tangential springs/dampers and applies frictional force opposing tangential velocity (in this case frictional sticking and stick-slip
transition are not modeled); default: 0.0</li>
</ul>
</div>
<div class="figure align-center" id="id3">
<span id="parmec-spring-stroke-offset"></span><a class="reference internal image-reference" href="../_images/spring-stroke-offset.png"><img alt="../_images/spring-stroke-offset.png" src="../_images/spring-stroke-offset.png" style="width: 60%;" /></a>
<p class="caption"><span class="caption-number">Fig. 81 </span><span class="caption-text">The concept of time dependent spring stroke offset.</span></p>
</div>
</div>
<div class="section" id="torsion-spring">
<span id="parmec-command-torsion-spring"></span><h2>TORSION_SPRING<a class="headerlink" href="#torsion-spring" title="Permalink to this headline">¶</a></h2>
<p>Create a torsional spring constraint. The applied torque formula reads</p>
<div class="math">
\[\mathbf{t}\left(t\right)=\left(\text{kroll}\left(\psi\right)+\text{droll}\left(\dot{\psi}\right)\right)\mathbf{x}\left(t\right)
+\left(\text{kpitch}\left(\phi\right)+\text{dpitch}\left(\dot{\phi}\right)\right)\mathbf{y}\left(t\right)
+\left(\text{kyaw}\left(\theta\right)+\text{dyaw}\left(\dot{\theta}\right)\right)\mathbf{z}\left(t\right)\]</div>
<p>where the angles <span class="math">\(\psi\)</span>, <span class="math">\(\phi\)</span>, <span class="math">\(\theta\)</span> are calculated withe the help of co-rotated unit directions
<span class="math">\(\mathbf{x}\)</span>, <span class="math">\(\mathbf{y}\)</span>, <span class="math">\(\mathbf{z}\)</span> as follows</p>
<div class="math">
\[\mathbf{y}=\mathbf{z}\times\mathbf{x}\]</div>
<div class="math">
\[\begin{split}\left[\begin{array}{ccc}
x_{1} &amp; y_{1} &amp; z_{1}\\
x_{2} &amp; y_{2} &amp; z_{2}\\
x_{3} &amp; y_{3} &amp; z_{3}
\end{array}\right]\left(t\right)=\mathbf{\Lambda}_{1}\left(t\right)\left[\begin{array}{ccc}
x_{1} &amp; y_{1} &amp; z_{1}\\
x_{2} &amp; y_{2} &amp; z_{2}\\
x_{3} &amp; y_{3} &amp; z_{3}
\end{array}\right]\left(0\right)\end{split}\]</div>
<div class="math">
\[\dot{\psi}=\mathbf{x}\cdot\left(\mathbf{\omega}_{1}-\mathbf{\omega}_{2}\right)\]</div>
<div class="math">
\[\dot{\phi}=\mathbf{z}\cdot\left(\mathbf{\omega}_{1}-\mathbf{\omega}_{2}\right)\]</div>
<div class="math">
\[\dot{\theta}=\mathbf{y}\cdot\left(\mathbf{\omega}_{1}-\mathbf{\omega}_{2}\right)\]</div>
<div class="math">
\[\psi\left(t\right)=\int_{0}^{t}\dot{\psi}\left(t\right)dt,\,\,\phi\left(t\right)=\int_{0}^{t}
\dot{\phi}\left(t\right)dt,\,\,\theta\left(t\right)=\int_{0}^{t}\dot{\theta}\left(t\right)dt\]</div>
<p>and where <span class="math">\(\mathbf{\omega}_{i}\)</span> are the spatial angular velocities of particles 1 and 2,
and <span class="math">\(\mathbf{\Lambda}_{1}\)</span> is the rigid rotation matrix of particle 1.</p>
<div class="topic">
<p class="topic-title first">trsnum = TORSION_SPRING (part1, part2, zdir, xdir | kroll, kpitch, kyaw, droll, dpitch, dyaw, cone, refpnt) <span class="red">(experimental)</span></p>
<ul class="simple">
<li><strong>trsnum</strong> - torsion spring number</li>
<li><strong>part1</strong> - first particle number</li>
<li><strong>part2</strong> - second particle number; -1 can be used to indicate a single-particle constraint</li>
<li><strong>zdir</strong>, <strong>xdir</strong> - reference direction tuples, <span class="math">\(\mathbf{z}=\left(z_{1},z_{2},z_{3}\right)\)</span> and
<span class="math">\(\mathbf{x}=\left(x_{1},x_{2},x_{3}\right)\)</span>, co-rotated with the two particles, and used to determine
the torsion angles <span class="math">\(\psi\)</span>, <span class="math">\(\theta\)</span>, <span class="math">\(\phi\)</span> as described above; these directions must be
orthogonal</li>
<li><strong>kyaw</strong>, <strong>kroll</strong>, <strong>kpitch</strong> - spring torque lookup tables <span class="math">\(\left[\text{angle}_{1},\text{torque}_{1},\text{angle}_{2},\text{torque}_{2},...\right]\)</span>,
about the three torsion angles; default: <span class="math">\(\left[-\infty,0,+\infty,0\right]\)</span></li>
<li><strong>dyaw</strong>, <strong>droll</strong>, <strong>dpitch</strong> - dashpot torque lookup tables <span class="math">\(\left[\text{angvel}_{1},\text{torque}_{1},\text{angvel}_{2},\text{torque}_{2},...\right]\)</span>
or a critical damping ratio from interval <span class="math">\(\left[0,+\infty\right)\)</span>; default: <span class="math">\(\left[-\infty,0,+\infty,0\right]\)</span></li>
<li><strong>cone</strong> - optional tuple (‘roll’, ‘yaw’), (‘roll’, ‘pitch’), (‘pitch’, ‘yaw’) or (‘roll’, ‘pitch’, ‘yaw’) denoting a cone
constraint in the (roll, pitch, yaw) angle space; the spring/dashpot torque curves of the first in (roll, pitch, yaw) order
coordinate are used (hence it makes sense to define at least one of these curves), e.g. both (‘roll’, ‘pitch’) and
(‘pitch’, ‘roll’) result in torque formula <span class="math">\(\mathbf{t}=\left[\text{kroll}\left(\sqrt{\psi^{2}+\phi^{2}}\right)+\text{droll}\left(\frac{d}{dt}\sqrt{\psi^{2}+\phi^{2}}\right)\right]\left[\frac{\psi}{\sqrt{\psi^{2}+\phi^{2}}}\mathbf{x}+\frac{\phi}{\sqrt{\psi^{2}+\phi^{2}}}\mathbf{y}\right]\)</span>, etc.; default: not specified</li>
<li><strong>refpnt</strong> - a reference point moving with <strong>part1</strong>, used to position in space the <a class="reference internal" href="#parmec-command-output"><span class="std std-ref">OUTPUT</span></a> vector fields;
default: <span class="math">\(0.5\left(\text{centre}\left(\text{part1}\right)+\text{centre}\left(\text{part2}\right)\right)\)</span> or
<span class="math">\(\text{centre}\left(\text{part1}\right)\)</span> when part2 = -1</li>
</ul>
</div>
</div>
<div class="section" id="unspring">
<span id="parmec-command-unspring"></span><h2>UNSPRING<a class="headerlink" href="#unspring" title="Permalink to this headline">¶</a></h2>
<p>Undoes user defined selection of springs (<strong>msprings</strong>) based on the value of spring entities experienced by a different user defined
selection of springs (<strong>tsprings</strong>). Modifications to the spring curves occur during a simulation. Undone springs remain in the simulation
but generate zero forces.</p>
<div class="topic">
<p class="topic-title first">UNSPRING (tsprings, msprings, limits | entity, operator, abs, nsteps, nfreq, unload, activate) <span class="red">(experimental)</span></p>
<ul class="simple">
<li><strong>tsprings</strong> - list of unique spring numbers whose spring entities are assessed against a criteria defined by limits; must be nonempty</li>
<li><strong>msprings</strong> - list of unique spring numbers which are to be modified if <strong>tsprings</strong> meet the limits criteria (springs defined in <strong>tsprings</strong>
are not modified unless also specified in <strong>msprings</strong>); must be nonempty</li>
<li><strong>limits</strong> - tuple of (min, max) <strong>tsprings operator entity</strong> limit values which need to be exceeded for <strong>msprings</strong> to be modified; if either
value is <em>None</em> then no failure limit is assumed e.g. (<em>None</em>, max) only has an upper failure limit; also min &lt; max</li>
<li><strong>entity</strong> - scalar spring entity string: (spring stroke) ‘STROKE’, (spring total force) ‘F’, (spring force without damping) ‘SF’,
(spring total friction force) ‘FF’, cf.  <a class="reference internal" href="#parmec-command-history"><span class="std std-ref">HISTORY</span></a> and <a class="reference internal" href="#parmec-command-output"><span class="std std-ref">OUTPUT</span></a>; default: ‘SF’</li>
<li><strong>operator</strong> - collective <strong>tsprings</strong> operator string: ‘SUM’, ‘MIN’, ‘MAX’; default: ‘SUM’</li>
<li><strong>abs</strong> - boolean, if <em>True</em> then spring forces are converted to absolute values before summation of the spring forces; default: <em>False</em></li>
<li><strong>nsteps</strong> - int, number of time steps between calls of UNSPRING; default: 1</li>
<li><strong>nfreq</strong> - int, number of <strong>nsteps</strong> for which <strong>tsprings</strong> exceed <strong>limits</strong> before <strong>msprings</strong> are modified; default: 1</li>
<li><strong>unload</strong> - Python dictionary (i.e. <strong>unload</strong> [key] = value), where <em>key</em> (int) - unique spring number (must be present in <strong>msprings</strong>)
and value (int) - time series number (<a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a>) defining the unload spring curve; an unloading curve must
originate at zero and increase monotonically; once modification is activated, for each spring in <strong>msprings</strong>, the unloading curve is
individually applied with a shift specific to the current displacement; both negative and positive displacement increments decrease total
spring forces until zero; the spring force remains zero ever after; dashpot force is zero during unloading; default: instantaneous unloading
to zero total force</li>
<li><strong>activate</strong> - a list of inactive <a class="reference internal" href="#parmec-command-spring"><span class="std std-ref">SPRING</span></a> numbers that will be activated upon complete unloading of all <strong>msprings</strong>; default: empty</li>
</ul>
</div>
<p>By default, modification of <strong>msprings</strong> is based on the sum of the elastic spring force values across all spring numbers defined in tsprings. This is a sum
of absolute values if <strong>abs</strong> = <em>True</em>. Forces in all <strong>tsprings</strong> must exceed the specific min/max values defined in <strong>limits</strong> for the spring curves to be
modified (i.e. spring curve modification is an <em>and</em> operation, not <em>or</em>). For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tsprings</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">msprings</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">limits</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">UNSPRING</span><span class="p">(</span><span class="n">tsprings</span><span class="p">,</span> <span class="n">msprings</span><span class="p">,</span> <span class="n">limits</span><span class="p">)</span>
</pre></div>
</div>
<p>results in the resultant elastic spring force (SF) being assessed against the (-1.0, 1.0) limits. For the spring curves of springs 3 and 4 to be modified,
the sum of the forces of springs 1 and 2 must be outside of the (-1.0,1.0) limits for <strong>nfreq</strong> (=1) number of <strong>nsteps</strong> (=1).</p>
</div>
<div class="section" id="ball-joint">
<span id="parmec-command-ball-joint"></span><h2>BALL_JOINT<a class="headerlink" href="#ball-joint" title="Permalink to this headline">¶</a></h2>
<p>Create a ball joint between two particles at a coincident point. The joint is modeled as an algebraic constraint,
without affecting the stable time step. Any number of joints between any number of particles can be added. A linear
system is solved at every time step to calculate joint forces.</p>
<div class="topic">
<p class="topic-title first">jnum = BALL_JOINT (part1, point | part2) <span class="red">(experimental)</span></p>
<ul class="simple">
<li><strong>jnum</strong> - joint number</li>
<li><strong>part1</strong> - first particle number</li>
<li><strong>point</strong> - coincident point <span class="math">\(\left(x,y,z\right)\)</span></li>
<li><strong>part2</strong> - optional second particle number; default: not specified (in this case <strong>part1</strong> is fixed in space at <strong>point</strong>)</li>
</ul>
</div>
</div>
<div class="section" id="eqm">
<h2>EQM<a class="headerlink" href="#eqm" title="Permalink to this headline">¶</a></h2>
<p>Calculate equivalent point mass from particle inertia and mass properties. Two particles can be passed for relative motion mass.
This subroutine can be used to calculate linear stiffness and damping properties for spring based constraints, e.g.
<span class="math">\(\text{stiffness}=\text{acceleration}\cdot\text{EQM}/\text{leeway}\)</span> and
<span class="math">\(\text{damper}=\text{damping ratio}\cdot2\cdot\sqrt{\text{mass}\cdot\text{stiffness}}\)</span> can be used to define
spring and dashpot curves as <span class="math">\(\left[-1,-\text{spring},1,\text{spring}\right]\)</span> and <span class="math">\(\left[-1,-\text{damper},1,\text{damper}\right]\)</span>
respectively, with the critical time step equal to
<span class="math">\(\left(2/\sqrt{\text{stiffness}\cdot\text{mass}}\right)\cdot\left(\sqrt{1+\text{damper}^{2}}-\text{damper}\right)\)</span>.</p>
<div class="topic">
<p class="topic-title first">mass = EQM (part1, point1 | part2, point2, direction) <span class="red">(experimental)</span></p>
<ul class="simple">
<li><strong>mass</strong> - equivalent point mass</li>
<li><strong>part1</strong> - particle number</li>
<li><strong>point1</strong> - point coordinates</li>
<li><strong>part2</strong> - optional second particle number; default: not specified</li>
<li><strong>point2</strong> - optional second particle point coordinates; default: not specified</li>
<li><strong>direction</strong> - optional direction of motion; default: not specified</li>
</ul>
</div>
</div>
<div class="section" id="granular">
<h2>GRANULAR<a class="headerlink" href="#granular" title="Permalink to this headline">¶</a></h2>
<p>Define surface pairing for the granular contact interaction model. Default parameters, for unspecified pairings,
are: spring = 0.0, damper = 1.0, friction = (0.0, 0.0), rolling = 0.0, drilling = 0.0, and kskn = 0.5.</p>
<div class="topic">
<p class="topic-title first">GRANULAR (color1, color2, spring | damper, friction, rolling, drilling, kskn)</p>
<ul class="simple">
<li><strong>color1</strong> - first color (positive, or color1 = 0 and color2 = 0 to
redefine default parameters for unspecified pairings)</li>
<li><strong>color2</strong> - second color (positive, or color1 = 0 and color2 = 0 to
redefine default parameters for unspecified pairings)</li>
<li><strong>spring</strong> - normal spring constant</li>
<li><strong>damper</strong> - optional normal damping ratio; default: 1.0</li>
<li><strong>friction</strong> - optional Coulomb’s friction coefficient; default: 0.0;
tuple <span class="math">\(\left(\mu_{s},\mu_{d}\right)\)</span> can be used to specify
respectively static and dynamic friction coefficients; <span class="red">(experimental)</span></li>
<li><strong>rolling</strong> - optional rolling friction coefficient; default: 0.0; <span class="red">(under development)</span></li>
<li><strong>drilling</strong> - optional drilling friction coefficient; default: 0.0; <span class="red">(under development)</span></li>
<li><strong>kskn</strong> - optional ratio of normal to tangential spring and dashpot
parameters; default: 0.5</li>
</ul>
</div>
</div>
<div class="section" id="restrain">
<span id="parmec-command-restrain"></span><h2>RESTRAIN<a class="headerlink" href="#restrain" title="Permalink to this headline">¶</a></h2>
<p>Restrain particle motion.</p>
<div class="topic">
<p class="topic-title first">RESTRAIN (parnum | linear, angular)</p>
<ul class="simple">
<li><strong>parnum</strong> - particle number</li>
<li><strong>linear</strong> - list <span class="math">\(\left[x_{1},y_{1},z_{1}\right]\)</span>,
<span class="math">\(\left[x_{1},y_{1},z_{1},x_{2},y_{2},z_{2}\right]\)</span>, or
<span class="math">\(\left[x_{1},y_{1},z_{1},x_{2},y_{2},z_{2},x_{3},y_{3},z_{3}\right]\)</span>
defining directions of restrained linear motion; default:
<span class="math">\(\left[0,0,0\right]\)</span></li>
<li><strong>angular</strong> - list <span class="math">\(\left[x_{1},y_{1},z_{1}\right]\)</span>,
<span class="math">\(\left[x_{1},y_{1},z_{1},x_{2},y_{2},z_{2}\right]\)</span>, or
<span class="math">\(\left[x_{1},y_{1},z_{1},x_{2},y_{2},z_{2},x_{3},y_{3},z_{3}\right]\)</span>
defining directions of restrained spatial rotation; default:
<span class="math">\(\left[0,0,0\right]\)</span></li>
</ul>
</div>
</div>
<div class="section" id="prescribe">
<h2>PRESCRIBE<a class="headerlink" href="#prescribe" title="Permalink to this headline">¶</a></h2>
<p>Prescribe particle motion. Prescribed motion overwrites this resulting
from dynamics and restraints.</p>
<div class="topic">
<p class="topic-title first">PRESCRIBE (parnum | linear, angular, kind)</p>
<ul class="simple">
<li><strong>parnum</strong> - particle number</li>
<li><strong>linear</strong> - a tuple <span class="math">\((i,j,k)\)</span> of <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> numbers,
or a callback: <span class="math">\(\left(v_{x},v_{y},v_{z}\right)=\)</span> <strong>linear</strong> <span class="math">\(\left(t\right)\)</span>,
defining linear velocity or acceleration history; default: <em>not prescribed</em></li>
<li><strong>angular</strong> - a tuple <span class="math">\((i,j,k)\)</span> of <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> numbers,
or a callback: <span class="math">\(\left(\omega_{x},\omega_{y},\omega_{z}\right)=\)</span> <strong>angular</strong> <span class="math">\(\left(t\right)\)</span>,
defining spatial angular velocity or acceleration history; default: <em>not prescribed</em></li>
<li><strong>kind</strong> - string ’vv’, ’va’, ’av’, or ’aa’ indicating interpretation
of respectively <strong>linear</strong> and <strong>angular</strong> time histories as either
velocity or acceleration; default: ’vv’</li>
</ul>
</div>
</div>
<div class="section" id="velocity">
<h2>VELOCITY<a class="headerlink" href="#velocity" title="Permalink to this headline">¶</a></h2>
<p>Set particle velocity.</p>
<div class="topic">
<p class="topic-title first">VELOCITY (parnum | linear, angular)</p>
<ul class="simple">
<li><strong>parnum</strong> - particle number</li>
<li><strong>linear</strong> - linear velocity tuple
<span class="math">\(\left(v_{x},v_{y},v_{z}\right)\)</span>; default:
<span class="math">\(\left(0,0,0\right)\)</span> at <span class="math">\(t=0\)</span></li>
<li><strong>angular</strong> - angular velocity tuple
<span class="math">\(\left(\omega_{x},\omega_{y},\omega_{z}\right)\)</span>; default:
<span class="math">\(\left(0,0,0\right)\)</span> at <span class="math">\(t=0\)</span></li>
</ul>
</div>
</div>
<div class="section" id="gravity">
<span id="parmec-command-gravity"></span><h2>GRAVITY<a class="headerlink" href="#gravity" title="Permalink to this headline">¶</a></h2>
<p>Set gravity.</p>
<div class="topic">
<p class="topic-title first">GRAVITY (gx, gy, gz)</p>
<ul class="simple">
<li><strong>gx</strong> - constant <span class="math">\(x\)</span> float number, or callback
<strong>gx</strong><span class="math">\((t)\)</span>, or <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> number</li>
<li><strong>gy</strong> - constant <span class="math">\(y\)</span> float number, or callback
<strong>gy</strong><span class="math">\((t)\)</span>, or <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> number</li>
<li><strong>gz</strong> - constant <span class="math">\(z\)</span> float number, or callback
<strong>gz</strong><span class="math">\((t)\)</span>, or <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> number</li>
</ul>
</div>
</div>
<div class="section" id="damping">
<h2>DAMPING<a class="headerlink" href="#damping" title="Permalink to this headline">¶</a></h2>
<p>Set global damping, applied as</p>
<div class="math">
\[\begin{split}\text{force}=-m\left[\begin{array}{c}
-d_{vx}v_{x}\\
-d_{vy}v_{y}\\
-d_{vz}v_{z}
\end{array}\right],\text{ torque}=-\mathbf{\Lambda}\mathbf{J}\mathbf{\Lambda}^{T}\left[\begin{array}{c}
-d_{\omega x}\omega_{x}\\
-d_{\omega y}\omega_{y}\\
-d_{\omega z}\omega_{z}
\end{array}\right]\end{split}\]</div>
<p>where <span class="math">\(m\)</span> is scalar mass, <span class="math">\(v\)</span> is linear velocity,
<span class="math">\(\mathbf{\Lambda}\)</span> is the rotation matrix, <span class="math">\(\mathbf{J}\)</span> is
the referential inertia matrix, and <span class="math">\(\omega\)</span> is spatial angular
velocity.</p>
<div class="topic">
<p class="topic-title first">DAMPING (linear, angular)</p>
<ul class="simple">
<li><strong>linear</strong> - linear damping curve callback <span class="math">\(\left(d_{vx},d_{vy},d_{vz}\right)=\)</span> <strong>linear</strong>
<span class="math">\(\left(t\right)\)</span>, or a tuple <span class="math">\((i,j,k)\)</span> of <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> numbers</li>
<li><strong>angular</strong> - angular damping curve callback <span class="math">\(\left(d_{\omega x},d_{\omega y},d_{\omega z}\right)=\)</span>
<strong>angular</strong> <span class="math">\(\left(t\right)\)</span>, or a tuple <span class="math">\((i,j,k)\)</span> of <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> numbers</li>
</ul>
</div>
</div>
<div class="section" id="critical">
<h2>CRITICAL<a class="headerlink" href="#critical" title="Permalink to this headline">¶</a></h2>
<p>Estimate critical time step. By default this routine returns an estimate in the area of a practical stable step.
When run with the optional parameter <span class="math">\(\text{perspring}=n\)</span> it will return a list of lowest estimates for
<span class="math">\(n\)</span> individual springs. Similarly, when run with the optional parameter <span class="math">\(\text{perparticle}=n\)</span> it
will return a list of lowest estimates for <span class="math">\(n\)</span> individual particles. The actual stable time step may be
a factor of <span class="math">\(\left[0.1,10\right]\)</span> away of the returned step (estimated), depending on the degree of nonlinearity
of the system. <a class="reference external" href="https://www.dynasupport.com/tutorial/ls-dyna-users-guide/time-integration">See also</a>.</p>
<div class="topic">
<p class="topic-title first">h = CRITICAL (| perspring, perparticle)</p>
<ul class="simple">
<li><strong>h</strong> - critical time step (when run without parameters), or a list
<span class="math">\(\left[\left(h_{1},i_{1},\omega_{1},\xi_{1}\right),...,\left(h_{n},i_{n},\omega_{n},\xi_{n}\right)\right]\)</span>
when <strong>perspring</strong> <span class="math">\(=n\)</span> or <strong>perparticle</strong> <span class="math">\(=n\)</span> is used, where <span class="math">\(h_{k}\)</span> is the per-spring/particle
critical time step estimate, <span class="math">\(i_{k}\)</span> is the spring/particle index, <span class="math">\(\omega_{k}\)</span> is the maximum spring/particle
circular frequency, and <span class="math">\(\xi_{k}\)</span> is the maximum spring/particle damping ratio; when both parameters <strong>perspring</strong>
<span class="math">\(=n\)</span> and <strong>perparticle</strong> <span class="math">\(=m\)</span> are used, a tuple of two corresponding lists is returned
(<span class="math">\(\left[\left(h_{1},i_{1},\omega_{1},\xi_{1}\right),...,\left(h_{n},i_{n},\omega_{n},\xi_{n}\right)\right]\)</span>,
<span class="math">\(\left[\left(h_{1},i_{1},\omega_{1},\xi_{1}\right),...,\left(h_{m},i_{m},\omega_{m},\xi_{m}\right)\right]\)</span>)</li>
<li><strong>perspring</strong> - optional integer <span class="math">\(n\)</span> indicating the number of lowest per-spring critical time step estimates;
default: undefined</li>
<li><strong>perparticle</strong> - optional integer <span class="math">\(n\)</span> indicating the number of lowest per-particle critical time step estimates;
default: undefined</li>
</ul>
</div>
</div>
<div class="section" id="history">
<span id="parmec-command-history"></span><h2>HISTORY<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h2>
<p>Before running a simulation, request time history output.</p>
<div class="topic">
<p class="topic-title first">list = HISTORY (entity | source, point, h5file, h5last)</p>
<ul class="simple">
<li><strong>list</strong> - output time history list (empty upon initial request,
populated during simulation)</li>
<li><strong>entity</strong> - entity name; global entities: (output time) ’TIME’;
particle entities: (position) ’PX’, ’PY’, ’PZ’, ’|P|’,
(displacement) ’DX’, ’DY’, ’DZ’, ’|D|’, (linear velocity) ’VX’,
’VY’, ’VZ’, ’|V|’, (angular velocity) ’OX’, ’OY’, ’OZ’, ’|O|’,
(body force) ’FX’, ’FY’, ’FZ’, ’|F|’, (body torque) ’TX’, ’TY’,
’TZ’, ’|T|’; linear spring entities: (spring length) ‘LENGTH’,
(spring stroke) ’STROKE’, (spring total force) ’F’, (spring force
without damping) ’SF’, (spring total friction force) ‘FF’, (spring
state) ‘SS’, cf. <a class="reference internal" href="#parmec-command-output"><span class="std std-ref">OUTPUT</span></a> for description;
torsional spring entities: (spring local direction components:
<span class="math">\(\mathbf{z}\)</span> - yaw, <span class="math">\(\mathbf{x}\)</span> - roll, and
<span class="math">\(\mathbf{y}=\mathbf{z}\times\mathbf{x}\)</span> - pitch) ‘ZDIR_X’,
‘ZDIR_Y’, ‘ZDIR_Z’, ‘XDIR_X’, ‘XDIR_Y’, ‘XDIR_Z’, (spring rotation
angles) ‘ROLL’, ‘PITCH’, ‘YAW’, (spring total moment components:
r - roll, p - pitch, y - yaw) ‘TRQTOT_R’, ‘TRQTOT_P’, ‘TRQTOT_Y’,
(spring undamped moment components) ‘TRQSPR_R’, ‘TRQSPR_P’, ‘TRQSPR_Y’;
joint entities: ‘(joint reaction) ‘JREAC_X’, ‘JREAC_Y’, ‘JREAC_Z’, ‘|JREAC|’</li>
<li><strong>source</strong> - particle number <em>i</em>, or a list of particle numbers
[<em>i, j, …</em>], or a spatial sphere defined as tuple
<span class="math">\(\left(x,y,z,r\right)\)</span> <span class="red">(under development)</span>, or a spatial box defined as tuple
<span class="math">\(\left(x_{\text{min}},y_{\text{min}},z_{\text{min}},x_{\text{max}},y_{\text{max}},z_{\text{max}}\right)\)</span>
<span class="red">(under development)</span>; in case of a list of particle numbers the output entity is averaged
over the set of particles; in case of a spatial sphere or box the output entity is averaged over
the set of particles passing through it <span class="red">(under development)</span>; default: 0 (useful when entity is ’TIME’);
spring/joint number or a list of numbers can be used as a source in case of spring/joint entities</li>
<li><strong>point</strong> - optional referential point used in case of a single
particle source; default: particle mass centre</li>
<li><strong>h5file</strong> <span class="red">(experimental)</span> - optional .h5 file storing existing results; in this case the history is retrieved
from this file (if found) or an error message is issued; an appropriate output file needs to be picked depending
on the entity, cf. <a class="reference internal" href="#parmec-command-output"><span class="std std-ref">OUTPUT</span></a>; the output list is not populated until <strong>h5last</strong> = <em>True</em>;
default: not specified</li>
<li><strong>h5last</strong> <span class="red">(experimental)</span> - optional boolean flag marking a last call to HISTORY for which the <strong>h5file</strong> argument
is used; for faster reading all such histories are populated once HISTORY(…, <strong>h5file</strong> = …, <strong>h5last</strong> = <em>True</em>) is
called; default: <em>False</em></li>
</ul>
</div>
</div>
<div class="section" id="output">
<span id="parmec-command-output"></span><h2>OUTPUT<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>Before running a simulation, define scalar and/or vector entities
included into the output file(s). PARMEC outputs:</p>
<ul class="simple">
<li>*0.dump files for spherical particles not specified as a subset in the OUTPUT command</li>
<li>*1.dump, *2.dump, … files for spherical particles specified as subsets, where numbers
1, 2, … match consecutive OUTPUT calls</li>
<li>*0.vtk.* <strong>and/or</strong> (*0.h5, *0.xmf) <strong>and/or</strong> (*0.med) files for obstacles and mesh
based particles <strong>not</strong> specified as <strong>a subset</strong> in the OUTPUT command</li>
<li>*1.vtk.*, *2.vtk.*, … <strong>and/or</strong> (*1.h5, *1.xmf, *2.h5, *2.xmf, …) <strong>and/or</strong>
(*1.med, *2.med…) files for mesh based particles specified as subsets, where numbers
1, 2, … match consecutive OUTPUT calls</li>
<li>*0rb.vtk.* <strong>and/or</strong> (*0rb.h5, *0rb.xmf) <strong>and/or</strong> (*0rb.med) files for rigid body
data of particles <strong>not</strong> specified as <strong>a subset</strong> in the OUTPUT command</li>
<li>*1rb.vtk.*, *2rb.vtk.*, … <strong>and/or</strong> (*1rb.h5, *1rb.xmf, *2rb.h5, *2rb.xmf, …)
<strong>and/or</strong> (*1rb.med, *2rb.med, …) files for rigid body data of particles specified as
subsets, where numbers 1, 2, … match consecutive OUTPUT calls</li>
<li>*0cd.vtk.* <strong>and/or</strong> (*0cd.h5, *0cd.xmf) <strong>and/or</strong> (*0cd.med) files  for contact data
including particles <strong>not</strong> specified as <strong>a subset</strong> in the OUTPUT command</li>
<li>*1cd.vtk.*, *2cd.vtk.*, … <strong>and/or</strong> (*1cd.h5, *1cd.xmf, *2cd.h5, *2cd.xmf, …)
<strong>and/or</strong> (*1cd.med, *2cd.med, …) files for contact data including particles specified
as subsets, where numbers 1, 2, … match consecutive OUTPUT calls</li>
<li>*0sl.vtk.* <strong>and/or</strong> (*0sl.h5, *0sl.xmf) <strong>and/or</strong> (*0sl.med) files for linear spring data
including particles <strong>not</strong> specified as <strong>a subset</strong> in the OUTPUT command</li>
<li>*1sl.vtk.*, *2sl.vtk.*, … <strong>and/or</strong> (*1sl.h5, *1sl.xmf, *2sl.h5, *2sl.xmf, …)
<strong>and/or</strong> (*1sl.med, *2sl.med, …) files for linear spring data including particles specified
as subsets, where numbers 1, 2, … match consecutive OUTPUT calls</li>
<li>*0st.vtk.* <strong>and/or</strong> (*0st.h5, *0st.xmf) <strong>and/or</strong> (*0st.med) files for torsional spring data
including particles <strong>not</strong> specified as <strong>a subset</strong> in the OUTPUT command</li>
<li>*1st.vtk.*, *2st.vtk.*, … <strong>and/or</strong> (*1st.h5, *1st.xmf, *2st.h5, *2st.xmf, …)
<strong>and/or</strong> (*1st.med, *2st.med, …) files for torsional spring data including particles specified
as subsets, where numbers 1, 2, … match consecutive OUTPUT calls</li>
<li>*0jt.vtk.* <strong>and/or</strong> (*0jt.h5, *0jt.xmf) <strong>and/or</strong> (*0jt.med) files for joints data
including particles <strong>not</strong> specified as <strong>a subset</strong> in the OUTPUT command</li>
<li>*1jt.vtk.*, *2jt.vtk.*, … <strong>and/or</strong> (*1jt.h5, *1jt.xmf, *2jt.h5, *2jt.xmf, …)
<strong>and/or</strong> (*1jt.med, *2jt.med, …) files for joints data including particles specified
as subsets, where numbers 1, 2, … match consecutive OUTPUT calls</li>
</ul>
<div class="topic">
<p class="topic-title first">OUTPUT ( | entities, subset, mode, format)</p>
<ul class="simple">
<li><strong>entities</strong> - list of output entities; default: [’NUMBER’, ’COLOR’,
’DISPL’, ’LENGTH’, ’ORIENT’, ‘ORIENT1’, ‘ORIENT2’, ‘ORIENT3’, ’LINVEL’,
’ANGVEL’, ’FORCE’, ’TORQUE’, ’F’, ’FN’, ’FT’, ’SF’, ’FF’, ’SS’, ’AREA’, ’PAIR’,
‘XDIR’, ‘YDIR’, ‘ZDIR’, ‘TRQROT’, ‘TRQTOT’, ‘TRQSPR’] where:<ul>
<li>’NUMBER’ - scalar field of particle numbers (modes: ’SPH’, ’MESH’,
’RB’), or scalar field of spring/joint numbers (modes: ’SL’, ‘ST’, ‘JT’)</li>
<li>’COLOR’ - scalar field of surface colors (modes: ’SPH’, ’MESH’),
or 2-component vector field of contact surface colors (modes:
’CD’)</li>
<li>’DISPL’ - 3-component vector field of displacements (modes: ’SPH’,
’MESH’, ’RB’), or scalar field of contact depths (modes: ’CD’), or
scalar field of spring strokes (modes: ’SL’)</li>
<li>’LENGTH’ - scalar field of spring lengths (modes: ‘SL’)</li>
<li>’ORIENT’ - 9-component tensor field representing rigid rotation
matrix (modes: ‘RB’), or 3-component vector field of spring
orientations (modes: ’SL’)</li>
<li>’ORIENT1’, ‘ORIENT2’, ‘ORIENT3’ - three 3-component vector fields
representing columns of rigid rotation matrix (orientation vectors)
(modes: ’RB’)</li>
<li>’LINVEL’ - 3-component vector field of linear velocity (modes:
’SPH’, ’MESH’, ’RB’)</li>
<li>’ANGVEL’ - 3-component vector field of (spatially constant)
angular velocity (modes: ’SPH’, ’MESH’, ’RB’)</li>
<li>’FORCE’ - 3-component vector field of (spatially constant) total
body force (modes: ’SPH’, ’MESH’, ’RB’)</li>
<li>’TORQUE’ - 3-component vector field of (spatially constant) total
body torque (modes: ’SPH’, ’MESH’, ’RB’)</li>
<li>’F’ - 3-component vector field of total contact forces (modes:
’CD’), or scalar field of total spring forces (modes: ’SL’)</li>
<li>’FN’ - 3-component vector field of normal contact forces (modes:
’CD’)</li>
<li>’FT’ - 3-component vector field of tangential contact forces
(modes: ’CD’)</li>
<li>’SF’ - scalar field of spring force magnitude, without dashpot
contribution (modes: ’CD’, ’SL’)</li>
<li>’FF’ - scalar field of total friction force magnitude (modes: ’CD’, ’SL’)</li>
<li><dl class="first docutils">
<dt>‘SS’ - scalar field of spring states, where -3.0 denotes a regular spring (always active),</dt>
<dd>-2.0 denotes an active spring, -1.0 denotes a deactivated spring (zero force), and values
<span class="math">\(\ge0\)</span> denote a spring currently being unloaded (the number itself denotes
<a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a> used as an unloading curve) (modes: ‘SL’)</dd>
</dl>
</li>
<li>’AREA’ - scalar field of contact area (modes: ’CD’)</li>
<li>’PAIR’ - 2-component vector field of particle pair numbers (modes: ’CD’, ’SL’)</li>
<li>‘XDIR’ - 3-component vector field of x-directions (roll rotation) for torsion springs (modes: ‘TS’)</li>
<li>‘YDIR’ - 3-component vector field of y-directions (pitch rotation) for torsion springs (modes: ‘TS’)</li>
<li>‘ZDIR’ - 3-component vector field of z-directions (yaw rotation) for torsion springs (modes: ‘TS’)</li>
<li>‘TRQROT’ - 3-component vector field of a relative rotation of torsion springs in global coordinates (modes: ‘TS’);
use dot products to retrieve local rotation angles, e.g. <span class="math">\(\text{TRQROT}\cdot\text{XDIR}\)</span> will give roll, etc.</li>
<li>‘TRQTOT’ - 3-component vector field of total torques of torsion springs in global coordinates (modes: ‘TS’); use dot
products to retrieve components conjugate to (roll, pitch, yaw) angles, e.g. <span class="math">\(\text{TRQROT}\cdot\text{YDIR}\)</span>
will give the pitch-conjugate component, etc.</li>
<li>‘TRQSPR’ - 3-component vector field of spring torques (without dampers) of torsion springs in global
coordinates (modes: ‘TS’); use dot products to retrieve components conjugate to (roll, pitch, yaw) angles,
e.g. <span class="math">\(\text{TRQSPR}\cdot\text{ZDIR}\)</span> will give the yaw-conjugate component, etc.</li>
<li>‘JREAC’ - 3-component vector field of joint reactions (modes: ‘JT’)</li>
</ul>
</li>
<li><strong>subset</strong> - optional particle number <em>i,</em> or a list of particle
numbers [<em>i, j, …</em>], to which this specification is narrowed
down</li>
<li><strong>mode</strong> - optional output mode or list of output modes: ’SPH’ for sphere output, ’MESH’ for mesh output,
’RB’ for rigid body output, ’CD’ for contact data output, ’SL’ for linear spring data output, ’ST’ for
linear spring data output, ‘JT’ for joints data output; default: [’SPH’, ’MESH’, ’RB’, ’CD’, ’SL’, ’ST’, ‘JT’]</li>
<li><strong>format</strong> - optional output format, e.g. ‘DUMP’ <span class="red">(experimental/under development)</span> or
‘VTK’ or ‘XDMF’ or ‘MED’ <span class="red">(experimental/under development)</span>,
or a list e.g. [‘DUMP’, ‘VTK’, ‘XDMF’, ‘MED’], where ‘DUMP’ is the text based
<a class="reference external" href="http://lammps.sandia.gov/doc/dump.html">LAMMPS format</a> (experimental/under development),
‘VTK’ is the text based legacy <a class="reference external" href="http://www.vtk.org/wp-content/uploads/2015/04/file-formats.pdf">VTK format</a>,
‘XDMF’ is the HDF5/XML based <a class="reference external" href="http://www.xdmf.org/index.php/XDMF_Model_and_Format">XDMF format</a>,
and ‘MED’ is the binary <a class="reference external" href="http://www.salome-platform.org/user-section/about/med">MED format</a>
<span class="red">(experimental/under development)</span>; default: ‘XDMF’</li>
</ul>
</div>
</div>
<div class="section" id="dem">
<span id="parmec-command-dem"></span><h2>DEM<a class="headerlink" href="#dem" title="Permalink to this headline">¶</a></h2>
<p>Run DEM simulation.</p>
<div class="topic">
<p class="topic-title first">t = DEM (duration, step | interval, prefix, adaptive)</p>
<ul class="simple">
<li><strong>t</strong> - simulation runtime in seconds</li>
<li><strong>duration</strong> - simulation duration</li>
<li><strong>step</strong> - time step; initial if <strong>adaptive</strong> is used or constant
otherwise</li>
<li><strong>interval</strong> - output interval (default: time step); tuple
<span class="math">\(\left(dt_{\text{files}},dt_{\text{history}}\right)\)</span> can be
used to indicate different output frequencies of output files and
time histories, respectively; callback functions or <a class="reference internal" href="#parmec-command-tseries"><span class="std std-ref">TSERIES</span></a>
numbers can also be used, e.g.
<span class="math">\(dt_{\text{files}}=\text{dt_fiels}\left(t\right)\)</span> and
<span class="math">\(dt_{\text{history}}=\text{tmsnum}\)</span>, prescribing variable
interval frequencies, depending on current time;</li>
<li><strong>prefix</strong> - output file name prefix (default: input file name
without the “.py” extension); Note: <strong>prefix</strong> can only change
at time 0.0 or after <a class="reference internal" href="#parmec-command-reset"><span class="std std-ref">RESET()</span></a></li>
<li><strong>adaptive</strong> - adaptive time step reduction factor; zero turns off
adaptive time stepping, values <span class="math">\(&gt;0.0\)</span> and <span class="math">\(\le1.0\)</span> turn
it on; default: <span class="math">\(0.0\)</span> <span class="red">(experimental)</span></li>
</ul>
</div>
</div>
</div>

  <div class="section">
  
  
  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">PARMES</a></h1>



<p class="blurb">Parallel mechanics and particulate media software blog</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=parmes&repo=parmes&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../solfec/index.html">SOLFEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dynlb/index.html">DYNLB</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">PARMEC</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html">Running</a></li>
<li class="toctree-l2"><a class="reference internal" href="implementation_status.html">Implementation status</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Input commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#argv">ARGV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reset">RESET</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tseries">TSERIES</a></li>
<li class="toctree-l3"><a class="reference internal" href="#material">MATERIAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sphere">SPHERE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mesh">MESH</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analytical">ANALYTICAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obstacle">OBSTACLE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spring">SPRING</a></li>
<li class="toctree-l3"><a class="reference internal" href="#torsion-spring">TORSION_SPRING</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unspring">UNSPRING</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ball-joint">BALL_JOINT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#eqm">EQM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#granular">GRANULAR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restrain">RESTRAIN</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prescribe">PRESCRIBE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#velocity">VELOCITY</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gravity">GRAVITY</a></li>
<li class="toctree-l3"><a class="reference internal" href="#damping">DAMPING</a></li>
<li class="toctree-l3"><a class="reference internal" href="#critical">CRITICAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#history">HISTORY</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output">OUTPUT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dem">DEM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_files.html">Output files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vbox/index.html">VBOX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgz/index.html">TGZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trs/index.html">TRs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groups.html">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blog/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">PARMEC</a><ul>
      <li>Previous: <a href="implementation_status.html" title="previous chapter">Parmec Implementation Status</a></li>
      <li>Next: <a href="output_files.html" title="next chapter">Output files</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../blog.html">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../blog/parmec_ball_joint.html">Jul 31 - Parmec ball joint and articulated pendulum example</a></li>
    
      <li><a href="../blog/parmec_spherical_joint.html">Jun 13 - Parmec spherical joint</a></li>
    
      <li><a href="../blog/parmec_spring_contact.html">May 23 - Parmec spring contact</a></li>
    
      <li><a href="../blog/spring_curve_tests.html">Mar 07 - Parmec spring curve tests</a></li>
    
      <li><a href="../blog/unspring_and_spring_state.html">Jan 15 - UNSPRING and spring state in Parmec</a></li>
    
  </ul>

  <h3><a href="../blog/tag.html">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/algebraic.html">algebraic</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/contact.html">contact</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/failure.html">failure</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/friction.html">friction</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/joints.html">joints</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/optimization.html">optimization</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../blog/tag/parmec.html">parmec</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/parmes.html">parmes</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/pendulum.html">pendulum</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/performance.html">performance</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/reports.html">reports</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../blog/tag/solfec.html">solfec</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/springs.html">springs</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../blog/tag/tests.html">tests</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../blog/tag/torsion.html">torsion</a></li>
      
    
  </ul>

  <h3><a href="../blog/archive.html">Archives</a></h3>
  <ul>
  
    
    <li><a href="../blog/2018.html">2018 (5)</a></li>
    
  
    
    <li><a href="../blog/2017.html">2017 (4)</a></li>
    
  
    
    <li><a href="../blog/2016.html">2016 (1)</a></li>
    
  
  </ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018 PARMES team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/parmec/input_commands.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
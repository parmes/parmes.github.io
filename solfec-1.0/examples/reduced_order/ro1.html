
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pipe impact &#8212; PARMES  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/parmes.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="81 bricks array" href="../81array.html" />
    <link rel="prev" title="Rotating bar" href="ro0.html" /> 
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../blog/atom.xml"
  title="PARMES/blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="pipe-impact">
<span id="solfec-1-0-examples-reduced-order-ro1"></span><h1>Pipe impact<a class="headerlink" href="#pipe-impact" title="Permalink to this headline">¶</a></h1>
<p>This example, also included in <a class="reference internal" href="../../../trs/index.html#tr1"><span class="std std-ref">TR1</span></a>, illustrates the reduced order modeling functionality on a pipe impact problem. The input files for
this example are located in the <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">solfec-1.0/examples/reduced–order1</a> directory.
These are:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/README">README</a> – a text based specification of the problem</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-fem-bc.py">ro1–fem–bc.py</a> – finite element body co–rotated model</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-fem-tl.py">ro1–fem–tl.py</a> – finite element Total Lagrangian model</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-reduced.py">ro1–reduced.py</a> – finite element reduced order model</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-lib.py">ro1–lib.py</a> – library functions used by other input files</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-modred.py">ro1–modred.py</a> – calculation of a reduced
<a class="reference external" href="https://en.wikipedia.org/wiki/Principal_component_analysis">POD</a> base</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-postp.py">ro1–postp.py</a> – post–processing script</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-run-all.py">ro1–run–all.py</a> – input file that runs all tests and generates all plots</p></li>
<li><p><a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-view.py">ro1–view.py</a> – input file suitable for use with Solfec-1.0 <a class="reference internal" href="../../running.html#solfec-1-0-running"><span class="std std-ref">viewer</span></a></p></li>
</ul>
<figure class="align-center" id="id7">
<span id="ro1-fig1"></span><a class="reference internal image-reference" href="../../../_images/ro1_pipe.png"><img alt="../../../_images/ro1_pipe.png" src="../../../_images/ro1_pipe.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 65 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: initial, impact, and final configurations (left to right).</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>An elastic pipe free falls onto a block obstacle. <a class="reference internal" href="#ro1-fig1"><span class="std std-numref">Fig. 65</span></a> illustrates the initial, impact and final configurations.
The inner pipe radius is 0.01 m, its thickness is 0.005 m, and its length is 0.1 m. The pipe lowest point is initially located
0.025 m above the top surface of the block. <a class="reference internal" href="#ro1-fig2"><span class="std std-numref">Fig. 66</span></a> shows the characteristic points, used to extract results. Point
p0 impacts the geometrical center of the block. Points p0, p1, p2, p3 are 0.025 m away from p4, when measuring along the pipe
length. The pipe is made of <span class="math notranslate nohighlight">\(36\times36\times4\)</span> fully integrated trilinear hexahedral elements. The elastic properties
of the pipe are <span class="math notranslate nohighlight">\(E=1\mbox{E7 Pa}\)</span>, <span class="math notranslate nohighlight">\(\nu=0.25\)</span> and its density is <span class="math notranslate nohighlight">\(\rho=1\mbox{E3 kg /}\mbox{m}^{3}\)</span>. The
obstacle has dimensions <span class="math notranslate nohighlight">\(0.01\times0.1\times0.01\mbox{ m}\)</span> and it is modeled as a geometrical boundary which does not
contribute mass. The gravity along the z–direction is <span class="math notranslate nohighlight">\(-10\text{ m/s}^{2}\)</span>. The simulation time step is 0.001 s, the
duration is 0.1 s, and the amount of damping is <span class="math notranslate nohighlight">\(\eta=1\text{E-4}\)</span>. Schemes TL, BC, and BC–RO are compared. 100 co–rotated
displacement samples from the Total Lagrangian solution and 6 rigid motion modes are used as input for the <a class="reference external" href="http://pythonhosted.org/modred/">Python modred package</a>, to produce 18 Proper Orthogonal Decomposition modes for the BC–RO approach.</p>
<figure class="align-center" id="id8">
<span id="ro1-fig2"></span><a class="reference internal image-reference" href="../../../_images/ro1_points.png"><img alt="../../../_images/ro1_points.png" src="../../../_images/ro1_points.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 66 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: mesh characteristic points.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><a class="reference internal" href="#ro1-fig3"><span class="std std-numref">Fig. 67</span></a> illustrates the energy balance: in all cases the graphs coincide relatively well. While the BC approach closely
follows the Total Lagrangian approach (TL), the reduced order BC–RO approach slightly deviates in its post-impact response.
Similar general response characteristic can be seen in <a class="reference internal" href="#ro1-fig4"><span class="std std-numref">Fig. 68</span></a>, <a class="reference internal" href="#ro1-fig5"><span class="std std-numref">Fig. 69</span></a>, <a class="reference internal" href="#ro1-fig6"><span class="std std-numref">Fig. 70</span></a>, where other
types of results are compared: we have some variation in the post–impact response, while overall the results match. We note,
that the rotation angle in <a class="reference internal" href="#ro1-fig4"><span class="std std-numref">Fig. 68</span></a> was calculated using</p>
<div class="math notranslate nohighlight">
\[\text{angle}=\arcsin\left(\left|\frac{\text{p5}-\text{p4}}{\left|\text{p5}-\text{p4}\right|}\times\left(-1,0,0\right)\right|\right)\text{.}\]</div>
<p><a class="reference internal" href="#ro1-tab1"><span class="std std-numref">Table 31</span></a> illustrates the runtime and storage statistics. The body co–rotational (BC) approach is about 6 times faster than
TL; the reduced order (BC–RO) approach is about 50 time faster and requires about 50 times less storage. The animated output of this
example can be seen in video <a class="footnote-reference brackets" href="#id2" id="id1">1</a>.</p>
<figure class="align-center" id="id9">
<span id="ro1-fig3"></span><a class="reference internal image-reference" href="../../../_images/ro1_energy.png"><img alt="../../../_images/ro1_energy.png" src="../../../_images/ro1_energy.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 67 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: kinetic (left), and internal energy between <span class="math notranslate nohighlight">\(t=0.05\text{s}\)</span> and <span class="math notranslate nohighlight">\(t=0.1\text{s}\)</span>.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id10">
<span id="ro1-fig4"></span><a class="reference internal image-reference" href="../../../_images/ro1_p4zp5z_rot.png"><img alt="../../../_images/ro1_p4zp5z_rot.png" src="../../../_images/ro1_p4zp5z_rot.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 68 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: z–coordinates of points p4, p5 (left), and pipe rotation angle (about y)
between <span class="math notranslate nohighlight">\(t=0.05\text{s}\)</span> and <span class="math notranslate nohighlight">\(t=0.1\text{s}\)</span>.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id11">
<span id="ro1-fig5"></span><a class="reference internal image-reference" href="../../../_images/ro1_diameters.png"><img alt="../../../_images/ro1_diameters.png" src="../../../_images/ro1_diameters.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 69 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: inner <span class="math notranslate nohighlight">\(\left|\text{p2}-\text{p3}\right|\)</span> (left), and outer <span class="math notranslate nohighlight">\(\left|\text{p0}-\text{p1}\right|\)</span>
pipe diameter in the contact area between <span class="math notranslate nohighlight">\(t=0.05\text{s}\)</span> and <span class="math notranslate nohighlight">\(t=0.1\text{s}\)</span>.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id12">
<span id="ro1-fig6"></span><a class="reference internal image-reference" href="../../../_images/ro1_p0p2_mises.png"><img alt="../../../_images/ro1_p0p2_mises.png" src="../../../_images/ro1_p0p2_mises.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 70 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: inner point p0 (left), and outer point p2 MISES stress between <span class="math notranslate nohighlight">\(t=0.05\text{s}\)</span> and <span class="math notranslate nohighlight">\(t=0.1\text{s}\)</span>.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<span id="ro1-tab1"></span><table class="docutils align-default" id="id13">
<caption><span class="caption-number">Table 31 </span><span class="caption-text">Example <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a>: runtime and storage comparison.</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 32%" />
<col style="width: 22%" />
<col style="width: 23%" />
<col style="width: 23%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Formulation</p></td>
<td><p>TL</p></td>
<td><p>BC</p></td>
<td><p>BC–RO</p></td>
</tr>
<tr class="row-even"><td><p>Runtime [s]</p></td>
<td><p>101</p></td>
<td><p>16.2</p></td>
<td><p>2.0</p></td>
</tr>
<tr class="row-odd"><td><p>Storage [MB]</p></td>
<td><p>13</p></td>
<td><p>13</p></td>
<td><p>0.264</p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets">1</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id6">2</a>)</span></dt>
<dd><p>An animation of the <a class="reference external" href="https://github.com/tkoziara/solfec/tree/master/examples/reduced-order1">reduced-order1</a> pipe impact example.</p>
</dd>
</dl>
<p align="center"><iframe width="640" height="360" src="//www.youtube.com/embed/RoSfE7-7ZH8?rel=0" frameborder="0" allowfullscreen="1">&nbsp;</iframe></p><div class="literal-block-wrapper docutils container" id="ro1-lst1">
<div class="code-block-caption"><span class="caption-number">Listing 8 </span><span class="caption-text">Listing of ro1–fem–tl.py</span><a class="headerlink" href="#ro1-lst1" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="linenos"> 2</span><span class="n">dirpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="linenos"> 3</span><span class="n">execfile</span> <span class="p">(</span><span class="n">dirpath</span> <span class="o">+</span> <span class="s1">&#39;/ro1-lib.py&#39;</span><span class="p">)</span> <span class="c1"># import library</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># set up simulation</span>
<span class="linenos"> 6</span><span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">bod</span><span class="p">,</span> <span class="n">stop</span><span class="p">)</span> <span class="o">=</span> <span class="n">ro1_simulation</span> <span class="p">(</span><span class="s1">&#39;fem-tl&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># collect displacement samples</span>
<span class="linenos"> 9</span><span class="k">if</span> <span class="n">sol</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;WRITE&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">VIEWER</span><span class="p">():</span>
<span class="linenos">10</span>  <span class="n">dsp</span> <span class="o">=</span> <span class="n">COROTATED_DISPLACEMENTS</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">bod</span><span class="p">)</span>
<span class="linenos">11</span>  <span class="n">rig</span> <span class="o">=</span> <span class="n">RIGID_DISPLACEMENTS</span> <span class="p">(</span><span class="n">bod</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># run simulation and save displacemement samples</span>
<span class="linenos">14</span><span class="k">if</span> <span class="n">sol</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;WRITE&#39;</span><span class="p">:</span>
<span class="linenos">15</span>  <span class="kn">import</span> <span class="nn">time</span>
<span class="linenos">16</span>  <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="linenos">17</span>  <span class="n">RUN</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">NEWTON_SOLVER</span><span class="p">(),</span> <span class="n">stop</span><span class="p">)</span>
<span class="linenos">18</span>  <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="linenos">19</span>  <span class="nb">print</span> <span class="s1">&#39;</span><span class="se">\b</span><span class="s1">FEM-TL runtime: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span>
<span class="linenos">20</span>  <span class="k">if</span> <span class="ow">not</span> <span class="n">VIEWER</span><span class="p">():</span>
<span class="linenos">21</span>    <span class="nb">print</span> <span class="s1">&#39;Saving displacement snapshots ...&#39;</span>
<span class="linenos">22</span>    <span class="kn">import</span> <span class="nn">pickle</span>
<span class="linenos">23</span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dsp</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out/reduced-order1/dsp.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span> 
<span class="linenos">24</span>    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">rig</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out/reduced-order1/rig.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">))</span> 
<span class="linenos">25</span>
<span class="linenos">26</span><span class="c1"># read and save time histories</span>
<span class="linenos">27</span><span class="k">if</span> <span class="n">sol</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;READ&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">VIEWER</span><span class="p">():</span>
<span class="linenos">28</span>  <span class="n">ro1_read_histories</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">bod</span><span class="p">,</span> <span class="s1">&#39;fem-tl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="#ro1-lst1"><span class="std std-numref">Listing 8</span></a> exemplifies the Total Lagrangian analysis input file. The simulation creation code
is hidden inside of the library subroutine <a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-lib.py#L10">ro1_simulation</a>,
which returns the <a class="reference internal" href="../../user/solfec.html#solfec-1-0-user-solfec"><span class="std std-ref">SOLFEC object</span></a>, the pipe <a class="reference internal" href="../../user/body.html#solfec-1-0-user-body"><span class="std std-ref">BODY object</span></a>
and the duration of the analysis, <code class="docutils literal notranslate"><span class="pre">stop</span></code>, in line 6. When Solfec-1.0 is opened in <code class="docutils literal notranslate"><span class="pre">'WIRITE'</span></code> mode (no results exist)
and without the graphical viewer (–v switch not used), we sample co–rotated deformable and rigid displacements in lines 10 and 11.
<a class="reference internal" href="../../user/utilities.html#solfec-1-0-command-corotated-displacements"><span class="std std-ref">COROTATED_DISPLACEMENTS</span></a> and <a class="reference internal" href="../../user/utilities.html#solfec-1-0-command-rigid-displacements"><span class="std std-ref">RIGID_DISPLACEMENTS</span></a>
commands are respectively used. Further, the simulation is run and the sampled displacements saved in lines 14–24. In case Solfec-1.0 is opened
in <code class="docutils literal notranslate"><span class="pre">'READ'</span></code> mode, in line 28, existing results are processed and time histories are extracted using a library routine
<a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-lib.py#L61">ro1_read_histories</a>. For comparison
<a class="reference internal" href="#ro1-lst2"><span class="std std-numref">Listing 9</span></a> includes the BC–RO analysis input code. Since most of the input code is inside
<a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-lib.py">ro1–lib.py</a> this file is even shorter.
The sampled displacements are used by <a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-modred.py">ro1–modred.py</a>,
invoked internally from within <a class="reference external" href="https://github.com/tkoziara/solfec/blob/master/examples/reduced-order1/ro1-lib.py#L10">ro1_simulation</a>,
when creating the reduced order model of the pipe body. This is depicted in lines 34–49 of <a class="reference internal" href="#ro1-lst3"><span class="std std-numref">Listing 10</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="ro1-lst2">
<div class="code-block-caption"><span class="caption-number">Listing 9 </span><span class="caption-text">Listing of ro1–reduced.py</span><a class="headerlink" href="#ro1-lst2" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="linenos"> 2</span><span class="n">dirpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="linenos"> 3</span><span class="n">execfile</span> <span class="p">(</span><span class="n">dirpath</span> <span class="o">+</span> <span class="s1">&#39;/ro1-lib.py&#39;</span><span class="p">)</span> <span class="c1"># import library</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># set up simulation</span>
<span class="linenos"> 6</span><span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">bod</span><span class="p">,</span> <span class="n">stop</span><span class="p">)</span> <span class="o">=</span> <span class="n">ro1_simulation</span> <span class="p">(</span><span class="s1">&#39;reduced&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># run simulation</span>
<span class="linenos"> 9</span><span class="k">if</span> <span class="n">sol</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;WRITE&#39;</span><span class="p">:</span>
<span class="linenos">10</span>  <span class="kn">import</span> <span class="nn">time</span>
<span class="linenos">11</span>  <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="linenos">12</span>  <span class="n">RUN</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">NEWTON_SOLVER</span><span class="p">(),</span> <span class="n">stop</span><span class="p">)</span>
<span class="linenos">13</span>  <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="linenos">14</span>  <span class="nb">print</span> <span class="s1">&#39;</span><span class="se">\b</span><span class="s1">BC-RO runtime: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="c1"># read and save time histories</span>
<span class="linenos">17</span><span class="k">if</span> <span class="n">sol</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;READ&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">VIEWER</span><span class="p">():</span>
<span class="linenos">18</span>  <span class="n">ro1_read_histories</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">bod</span><span class="p">,</span> <span class="s1">&#39;reduced&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="ro1-lst3">
<div class="code-block-caption"><span class="caption-number">Listing 10 </span><span class="caption-text">Listing of a portion of ro1–lib.py responsible for creation of the pipe body.</span><a class="headerlink" href="#ro1-lst3" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">30</span>  <span class="k">if</span> <span class="n">path_string</span> <span class="o">==</span> <span class="s1">&#39;fem-tl&#39;</span><span class="p">:</span>
<span class="linenos">31</span>    <span class="n">bod</span> <span class="o">=</span> <span class="n">BODY</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="s1">&#39;FINITE_ELEMENT&#39;</span><span class="p">,</span> <span class="n">msh</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">form</span> <span class="o">=</span> <span class="s1">&#39;TL&#39;</span><span class="p">)</span>
<span class="linenos">32</span>  <span class="k">elif</span> <span class="n">path_string</span> <span class="o">==</span> <span class="s1">&#39;fem-bc&#39;</span><span class="p">:</span>
<span class="linenos">33</span>    <span class="n">bod</span> <span class="o">=</span> <span class="n">BODY</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="s1">&#39;FINITE_ELEMENT&#39;</span><span class="p">,</span> <span class="n">msh</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">form</span> <span class="o">=</span> <span class="s1">&#39;BC&#39;</span><span class="p">)</span>
<span class="linenos">34</span>  <span class="k">else</span><span class="p">:</span>
<span class="linenos">35</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">36</span>      <span class="kn">import</span> <span class="nn">pickle</span>
<span class="linenos">37</span>      <span class="n">podbase</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out/reduced-order1/podbase.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">))</span>
<span class="linenos">38</span>    <span class="k">except</span><span class="p">:</span>
<span class="linenos">39</span>      <span class="nb">print</span> <span class="s1">&#39;File out/reduced-order1/podbase.pickle not found&#39;</span><span class="p">,</span>
<span class="linenos">40</span>      <span class="nb">print</span> <span class="s1">&#39;--&gt; running ro0-modred.py ...&#39;</span>
<span class="linenos">41</span>      <span class="n">execfile</span> <span class="p">(</span><span class="n">dirpath</span> <span class="o">+</span> <span class="s1">&#39;/ro1-modred.py&#39;</span><span class="p">)</span>
<span class="linenos">42</span>      <span class="k">try</span><span class="p">:</span>
<span class="linenos">43</span>	<span class="kn">import</span> <span class="nn">pickle</span>
<span class="linenos">44</span>	<span class="n">podbase</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out/reduced-order1/podbase.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">))</span>
<span class="linenos">45</span>      <span class="k">except</span><span class="p">:</span>
<span class="linenos">46</span>        <span class="nb">print</span> <span class="s1">&#39;Running ro0-modred.py has failed --&gt; report a bug!&#39;</span> 
<span class="linenos">47</span>	<span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos">48</span>	<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">49</span>    <span class="n">bod</span> <span class="o">=</span> <span class="n">BODY</span> <span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="s1">&#39;FINITE_ELEMENT&#39;</span><span class="p">,</span> <span class="n">msh</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">form</span> <span class="o">=</span> <span class="s1">&#39;BC-RO&#39;</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="n">podbase</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To run this example and generate figures presented here, enter Solfec-1.0 source directory and type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">solfec</span> <span class="n">examples</span><span class="o">/</span><span class="n">reduced</span><span class="o">-</span><span class="n">order1</span><span class="o">/</span><span class="n">ro1</span><span class="o">-</span><span class="n">run</span><span class="o">-</span><span class="nb">all</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>After all progress messages cease, figures are saved as <code class="docutils literal notranslate"><span class="pre">out/reduced-order1/*.png</span></code> files.
To interactively view the animated bar, as in video <a class="footnote-reference brackets" href="#id2" id="id6">1</a>, call</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">solfec</span> <span class="o">-</span><span class="n">v</span> <span class="n">examples</span><span class="o">/</span><span class="n">reduced</span><span class="o">-</span><span class="n">order1</span><span class="o">/</span><span class="n">ro1</span><span class="o">-</span><span class="n">view</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>You can type <code class="docutils literal notranslate"><span class="pre">o</span></code> in order to highlight the output path in the viewer and see which model you are currently looking at.
You can switch between models using <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>. Right–click the mouse button to activate a drop–down menu and see
other available options and keyboard shortcuts.</p>
</section>

<div class="section">
   
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">PARMES</a></h1>



<p class="blurb">Parallel mechanics and particulate media software blog</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=parmes&repo=parmes&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">SOLFEC-1.0</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../running.html">Running</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user.html">User Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../theory.html">Theory Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../validation.html">Validation Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../xdmf.html">XDMF export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../examples.html">Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../hybrid_modeling.html">Hybrid modeling</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../reduced_order.html">Reduced order modeling</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ro0.html">Rotating bar</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Pipe impact</a></li>
<li class="toctree-l4"><a class="reference internal" href="../81array.html">81 bricks array</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../time_series.html">Time series</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://groups.google.com/forum/#!forum/solfec-1">Google group</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../dynlb/index.html">DYNLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parmec/index.html">PARMEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vbox/index.html">VBOX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tgz/index.html">TGZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trs/index.html">TRs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../blog/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contact.html">Contact</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">SOLFEC-1.0</a><ul>
  <li><a href="../../examples.html">Solfec-1.0 Examples</a><ul>
  <li><a href="../reduced_order.html">Reduced order modeling</a><ul>
      <li>Previous: <a href="ro0.html" title="previous chapter">Rotating bar</a></li>
      <li>Next: <a href="../81array.html" title="next chapter">81 bricks array</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<h3>
  <a href="../../../blog.html">Recent Posts</a>
</h3>
<ul>
   
  <li>
    <a href="../../../blog/solfec-2.0-update-0.html"
      >09 September - Solfec-2.0 update 0</a
    >
  </li>
  
  <li>
    <a href="../../../blog/solfec_export_command.html"
      >09 January - SOLFEC_EXPORT command</a
    >
  </li>
  
  <li>
    <a href="../../../blog/parmec_ball_joint.html"
      >31 July - Parmec ball joint and articulated pendulum example</a
    >
  </li>
  
  <li>
    <a href="../../../blog/parmec_spherical_joint.html"
      >13 June - Parmec spherical joint</a
    >
  </li>
  
  <li>
    <a href="../../../blog/parmec_spring_contact.html"
      >23 May - Parmec spring contact</a
    >
  </li>
  
</ul>

<h3><a href="../../../blog/tag.html">Tags</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/algebraic.html">algebraic</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/contact.html">contact</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/failure.html">failure</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/friction.html">friction</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/joints.html">joints</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/optimization.html">optimization</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="../../../blog/tag/parmec.html">parmec</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/parmes.html">parmes</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/pendulum.html">pendulum</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/performance.html">performance</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/reports.html">reports</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-3">
    <a href="../../../blog/tag/solfec-10.html">solfec-1.0</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/solfec-20.html">solfec-2.0</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/springs.html">springs</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-2">
    <a href="../../../blog/tag/tests.html">tests</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="../../../blog/tag/torsion.html">torsion</a>
  </li>
   
</ul>

<h3>
  <a href="../../../blog/archive.html">Archives</a>
</h3>
<ul>
   
  <li>
    <a href="../../../blog/2019.html">2019 (2)</a>
  </li>
    
  <li>
    <a href="../../../blog/2018.html">2018 (5)</a>
  </li>
    
  <li>
    <a href="../../../blog/2017.html">2017 (4)</a>
  </li>
    
  <li>
    <a href="../../../blog/2016.html">2016 (1)</a>
  </li>
   
</ul>









        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022 PARMES team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/solfec-1.0/examples/reduced_order/ro1.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>